<header>
  <nav class="navbar navbar-default">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand">AngularJS Reddit Clone</a>
      </div>
    </div>
  </nav>
</header>

<main class="container">

  <div class="row">
    <div class="col-md-12">
      <ul class="nav nav-pills">
        <li role="presentation" class="active">
          <input ng-model="filterText" type="search" class="form-control input-sm search-form" placeholder="Filter">
        </li>
        <li class="dropdown" ng-init="sort='-vote_count'; sortName='Votes'">
          <a href="#" class="dropdown-toggle input-sm" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Sort By {{sortName}}<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a ng-click="sort='-vote_count'; sortName='Votes';">Votes</a></li>
            <li><a ng-click="sort='created_at'; sortName='Date';">Date</a></li>
            <li><a ng-click="sort='title'; sortName='Title'">Title</a></li>
          </ul>
        </li>
      </ul>

      <div class="well" ng-repeat="post in $ctrl.posts | filter:filterText | orderBy:sort">
        <div class="media-left">
          <img class="media-object" ng-src="{{ post.image_url }}"/>
          <p class="text-center">
            <a href="#">Edit Post</a>
          <p>
        </div>
        <div class="media-body">
          <h4 class="media-heading">{{post.title}} |
            <a ng-click="$ctrl.upVote(post)"><i class="glyphicon glyphicon-arrow-up"></i></a>
            <a ng-click="$ctrl.downVote(post)"><i class="glyphicon glyphicon-arrow-down"></i></a>
            {{post.vote_count}}
          </h4>
          <div class="text-right text-primary">{{post.author}}</div>
          <h5 class="post-body">{{post.body}}</h5>
          <h6 class="text-primary">Posted: <span am-time-ago="post.created_at"></span></h6>
          <div>
            <i class="glyphicon glyphicon-comment"></i>
            <a class="text-info" ng-click="showComments=!showComments">
              <ng-pluralize count="post.comments.length"
                  when="{
                    '0': 'No comments yet',
                    'one': '1 comment',
                    'other': '{} comments'
                  }">
              </ng-pluralize>
            </a>
          </div>
          <div ng-if="showComments">
            <div>
              <hr>
              <p ng-repeat="comment in post.comments">
                {{comment.content}}
              <p>

              <form ng-submit="$ctrl.addComment(post)" class="form-inline">
                <div class="form-group">
                  <input type="text" ng-model="post.newComment.content" class="form-control">
                </div>
                <div class="form-group">
                  <button class="btn btn-info" type="submit">Add Comment</button>
                </div>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

</main>